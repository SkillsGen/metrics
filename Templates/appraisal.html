<html>
  <head>
      <link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet"/>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>  
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
    
      google.charts.load('current', {'packages':['corechart']});
      

      function drawStuff(arg, chart) {
          dataurl = "{{ url_for('data')}}?q=" + arg
        var jsonData = $.ajax({
          url: dataurl,
          dataType: "json",
          async: false
          }).responseText;
          
        var options = {
            hAxis: { ticks: [0,20,40,60,80,100] },
            animation: {"startup": true},
        title: "Appraisal",
      };
      // Create our data table out of JSON data loaded from server.
      var data = new google.visualization.DataTable(jsonData);

        var chart = new google.visualization.BarChart(document.getElementById(chart));
        chart.draw(data, options);

      };
    </script>
  </head>
  <body>
     
      <div class="row">
          
          <div class="col-md-8">
              
                <div id="chart1" style="min-height: 500px"></div>
          </div>
          <div class="col-md-4">
                <div class="checkbox">
                    <label><input type="checkbox" id="q1" value="q1">How would you rate the classroom environment?</label>
                </div>
                <div class="checkbox">
                    <label><input type="checkbox" id="q2" value="q2">How would your rate the instructors knowledge of the subject matter?</label>
                </div>
                <div class="checkbox">
                    <label><input type="checkbox" id="q3" value="q3">How would you rate the instructors ability to provide real world experiences and examples?</label>
                </div>
                <div class="checkbox">
                    <label><input type="checkbox" id="q4" value="q4">How would you rate the instructors response to queries?</label>
                </div>
                <button onclick="getStuff(1,1,4)">get</button>
          </div>
            
      </div>
      
      <div class="row">
          <div class="col-md-8">
                <div id="chart2" style="min-height: 500px"></div>
          </div>
            <div class="col-md-4">
                <div class="checkbox">
                    <label><input type="checkbox" id="q5" value="q5">How would you rate the instructors overall performance?</label>
                </div>
                <div class="checkbox">
                    <label><input type="checkbox" id="q6" value="q6">How would you rate the clarity of the training content?</label>
                </div>
                <div class="checkbox">
                    <label><input type="checkbox" id="q7" value="q7">How would you rate the technical depth of the training content?</label>
                </div>
                <div class="checkbox">
                    <label><input type="checkbox" id="q8" value="q8">How would you rate the relevance of the training content to real world examples?</label>
                </div>
                <button onclick="getStuff(2,5,8)">get</button>
          </div>
      </div>
      <div class="row">
          <div class="col-md-8">
                <div id="chart3" style="min-height: 500px"></div>
          </div>
            <div class="col-md-4">
                <div class="checkbox">
                    <label><input type="checkbox" id="q9" value="q9">How would you rate the knowledge and skills you gained from this training?</label>
                </div>
                <div class="checkbox">
                    <label><input type="checkbox" id="q10" value="q10">How would you rate the impact of this training on your current job and future career potential?</label>
                </div>
                <div class="checkbox">
                    <label><input type="checkbox" id="q11" value="q11">Overall how satisfied where you with this training?</label>
                </div>
                <button onclick="getStuff(3,9,11)">get</button>
          </div>
      </div>
         
      <button onclick="drawStuff('None')">draw</button>
      <p>Session booking id: {{ bookingid }}</p>
      {{ metrics }}
      {{ responses }}
  </body>
</html>
<script>
    function getStuff(chart, start, end) {
        arg ="";
        var b = 0;
        for (var i = 1; i <= end; i++) {
            q = "q" + i;
            if (document.getElementById(q).checked == true && i >= start) {
                arg = arg + "1"
            }
            else {
                arg = arg + "0"
            }
        }
        chart = "chart" + chart;
        drawStuff(arg,chart);
    }
    function startStuff() {
        drawStuff('00000000000',"chart1");
        drawStuff('00000000000',"chart2");
        drawStuff('00000000000',"chart3");
    }
    google.charts.setOnLoadCallback(startStuff);
</script>
