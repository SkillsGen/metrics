<html>
  <head>
      <link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet"/>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>  
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
    
      google.charts.load('current', {'packages':['corechart']});
      //google.charts.setOnLoadCallback(drawStuff);

      function drawStuff(arg) {
          dataurl = "{{ url_for('data')}}?q=" + arg
        var jsonData = $.ajax({
          url: dataurl,
          dataType: "json",
          async: false
          }).responseText;
          
        var options = {
            hAxis: { ticks: [0,2,4,8,10,12,14,16] },
            animation: {"startup": true},
        title: "Appraisal",
      };
      // Create our data table out of JSON data loaded from server.
      var data = new google.visualization.DataTable(jsonData);

        var chart = new google.visualization.BarChart(document.getElementById('top_x_div'));
        chart.draw(data, options);

      };
    </script>
  </head>
  <body>
     
      <div class="row">
          
          <div class="col-md-6">
              
                <div id="top_x_div" style="min-height: 500px"></div>
          </div>
          <div class="col-md-3">
                <div class="checkbox">
                    <label><input type="checkbox" id="q1" value="q1">q1</label>
                </div>
                <div class="checkbox">
                    <label><input type="checkbox" id="q2" value="q2">q2</label>
                </div>
                <div class="checkbox">
                    <label><input type="checkbox" id="q3" value="q3">q3</label>
                </div>
                <div class="checkbox">
                    <label><input type="checkbox" id="q4" value="q4">q4</label>
                </div>
                <button onclick="getStuff()">get</button>
          </div>
          <div class="col-md-3">
                <div class="checkbox">
                    <label><input type="checkbox" id="q5" value="q5">q5</label>
                </div>
                <div class="checkbox">
                    <label><input type="checkbox" id="q6" value="q6">q6</label>
                </div>
                <div class="checkbox">
                    <label><input type="checkbox" id="q7" value="q7">q7</label>
                </div>
                <div class="checkbox">
                    <label><input type="checkbox" id="q8" value="q8">q8</label>
                </div>
                <button onclick="getStuff()">get</button>
          </div>
            
      </div>
         
      <button onclick="drawStuff('None')">draw</button>
      <p>Session booking id: {{ bookingid }}</p>
      {{ metrics }}
  </body>
</html>
<script>
    function getStuff() {
        arg ="";
        var b = 0;
        for (var i = 1; i <= 8; i++) {
            q = "q" + i;
            if (document.getElementById(q).checked == true) {
                arg = arg + "1"
            }
            else {
                arg = arg + "0"
            }
        }
        
        drawStuff(arg);
    }
</script>
